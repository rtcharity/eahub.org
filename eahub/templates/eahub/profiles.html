{% extends 'base.html' %}

{% load thumbnail %}

{% block content %}

<br><br>

<div class="container profiles animated fadeIn">
  <div class="row">
    <div class="col-xs-12 col-sm-4 link_box">
        <div class="list-group">
          {% if user.is_authenticated %}
          <a href="{% url 'my_profile' %}" class="list-group-item"><i class="fa fa-id-card"></i>View my profile</a>
          {% else %}
          <a href="{% url 'signup' %}" class="list-group-item"><i class="fa fa-plus"></i>Add a Profile</a>
          {% endif %}
        </div>
        <div class="list-group">
          <a href="mailto:lean@eahub.org" class="list-group-item"><i class="fa fa-envelope"></i>Contact LEAN</a>
        </div>
    </div>
    <div class="col-sm-8">
      {% include 'eahub/maps/list_page_map.html' with map_type="profiles" map_data=map_data_profiles %}
    </div>
  </div>
</div>

<br><br>

<div class="container animated fadeIn">
  <div class="search">
     Search: <input type="text" id="filterbox">
  </div>
  <table id="datatable-profiles" class="table enable-datatable table-striped table-bordered dataTable">
    <thead>
      <tr>
        <th class="picture-column"></th>
        <th>Name</th>
        <th>City/Town</th>
        <th>Country</th>
      </tr>
    </thead>
  <tbody>
    {% for profile in profiles %}
      <tr>
        {% thumbnail profile.image "200x200" crop="center" as im %}
          <td><img class="profile_picture" src="{{ im.url }}"></td>
        {% empty %}
          <td><img class="profile_picture" src="/static/images/avatars/{{ profile.image_placeholder }}"></td>
        {% endthumbnail %}
        <td><a href="{% url 'profile' profile.id %}">{{ profile.first_name }} {{ profile.last_name|default:'' }}</a></td>
        <td class="text-muted">
          {% if profile.gdpr_confirmed %}
            {{ profile.city_or_town|default:'' }}
          {% else %}
            hidden
          {% endif %}
        </td>
        <td class="text-muted">
          {% if profile.gdpr_confirmed %}
            {{ profile.country|default:'' }}
          {% else %}
            hidden
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
  </table>
</div>

{% endblock %}
