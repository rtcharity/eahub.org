{% extends 'form.html' %}

{% block title %}Edit Profile{% endblock %}

{% load crispy_forms_tags %}

{% block form_fields %}


{{ form.name|as_crispy_field }}


<label>Profile picture</label>
{% if profile.image %}
<button id="image-change-toggle" type="button" class="image-change-btn">Change current picture</button>

<div class="field image_upload" id="image-change" style="display: none">
  <input type="file" name="image" id="id_image" class="form-control">
</div>

<div class="image-clear" id="image-clear">
  <input type="checkbox" name="image-clear" id="image-clear_id">
  <label for="image-clear_id">Clear current picture</label>
</div>
{% else %}
<div class="field image_upload">
  <input type="file" name="image" id="id_image" class="form-control">
</div>
{% endif %}

{% if form.image.errors %}
  {% for error in form.image.errors %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endfor %}
{% endif %}

{{ form.city_or_town|as_crispy_field }}

{{ form.country|as_crispy_field }}

{{ form.summary|as_crispy_field }}

{{ form.is_public|as_crispy_field }}

<div class="privacy-note">
  If you make your profile private but enter a location, that location will be shown anonymously on the map if there are enough other EAs near you.
</div>

{% if opportunities %}
<div class="privacy-note">
  You have indicated openness to {{ opportunities|join:' and ' }}. As such, if you make your profile public, others may be able to search for it in the future based on your location, cause areas, expertise areas, and organizational affiliations.
</div>
{% endif %}

{{ form.subscribed_to_email_updates|as_crispy_field }}

{% endblock %}

{% block submit%}Update{% endblock%}

{% block scripts %}
<script src="/static/scripts/edit.js"></script>
{% endblock scripts %}
